<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025-11-03</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <style>
        body{
            font-family: Georgia, Times, 'Times New Roman', serif;
            background-color: blanchedalmond;
        }
    </style>
</head>
<body>
    <h1>ğŸ”¥í•™ìƒì •ë³´ ê´€ë¦¬ğŸ”¥</h1>
    <h3>ì…ë ¥í•œ í•™ìƒ ëª©ë¡ë“¤</h3>
    <div id="div_list1"></div>
    <button id="btn_list1">í•™ìƒ ëª©ë¡ ì¡°íšŒ</button>
    <button id="btn_add1">í•™ìƒ ì…ë ¥í•˜ê¸°</button>
    <button id="btn_update1">í•™ìƒ ìˆ˜ì •í•˜ê¸°</button>
    <button id="btn_delete1">í•™ìƒ ì‚­ì œí•˜ê¸°</button>
    <br/><br/>

    id : <input type="text" id="input_id1" /><br/>
    name : <input type="text" id="input_name1" /><br/>
    age : <input type="number" id="input_age1" /><br/>
    gender : <input type="text" id="input_gender1" /><br/>

    
    <div class="modal" id="modalResult" tabindex="-1" aria-labelledby="modalTitle" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">í•™ìƒì •ë³´ë¥¼ ìˆ˜ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Save Changeë¥¼ ëˆ„ë¥´ë©´ í•™ìƒì •ë³´ê°€ ìˆ˜ì •ë©ë‹ˆë‹¤.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                
            </div>
            </div>
        </div>
    </div>

    <div class="modal" id="modalResult2" tabindex="-1" aria-labelledby="modalTitle" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">í•™ìƒì„ ì¶”ê°€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Save Changeë¥¼ ëˆ„ë¥´ë©´ í•™ìƒì •ë´ ì¶”ê°€ë©ë‹ˆë‹¤.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
            </div>
        </div>
    </div>

    <script>
        $(function(){
            $("#btn_delete1").click(function(){
                alert("í•™ìƒì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ??");

                const xhr = new XMLHttpRequest();
                xhr.open("DELETE","https://6915405284e8bd126af93912.mockapi.io/user/" + $("#input_id1").val()); //input_id1ì— í˜„ì¬ì…ë ¥ëœê°’ì„ ê°€ì§„ ê³„ì •ì„ ì‚­ì œí•˜ë¼ê³  ìš”ì²­ì„ ì„¤ì •í•œë‹¤.
                xhr.setRequestHeader("content-type","application/json");
                xhr.send();
                xhr.onload = () => {
                    if (xhr.status === 200) {
                        alert("ì‚­ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
                        $("#btn_list1").click(); 
                    } else {
                        console.log(xhr.status, xhr.statusText);
                    }
                }
            });

            $("#btn_update1").click(function(){
                if (!confirm("í•™ìƒì •ë³´ë¥¼ update í•˜ì‹œê² ìŠµë‹ˆê¹Œ??")) {
                    return; 
                }

                const xhr = new XMLHttpRequest();
                xhr.open("PUT","https://6915405284e8bd126af93912.mockapi.io/user/" + $("#input_id1").val());
                xhr.setRequestHeader("content-type","application/json");
                let data = { 
                    name: $("#input_name1").val(), 
                    age: $("#input_age1").val(),
                    gender: $("#input_gender1").val()
                };
                xhr.send(JSON.stringify(data)); //ì…ë ¥ë°›ì€ê²ƒì„ jsonìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì„œë²„ì— ì „ì†¡
                xhr.onload = () => {
                    if (xhr.status === 200) {
                        let res = JSON.parse(xhr.response); //ì„œë²„ì—ì„œ ì‘ë‹µë°›ì€ JSONì„ JSì˜ ê°ì²´ë¡œ ë³€í™˜
                        $('#modalResult').find('.modal-title').text('âœ… ì—…ë°ì´íŠ¸ ì™„ë£Œ');
                        $('#modalResult').find('.modal-body p').html('í•™ìƒ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.<br><pre>' + JSON.stringify(res, null, 2) + '</pre>');
                        
                        const resultModal = new bootstrap.Modal(document.getElementById('modalResult'));
                        resultModal.show();

                        $("#btn_list1").click();
                    } else {
                        console.log(xhr.status, xhr.statusText);
                    }
                }
            });

            $("#btn_add1").click(function(){
                alert("í•™ìƒì„ ì¶”ê°€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");

                const xhr = new XMLHttpRequest();
                xhr.open("POST","https://6915405284e8bd126af93912.mockapi.io/user/");
                xhr.setRequestHeader("content-type","application/json");
                let data = { 
                    name: $("#input_name1").val(), 
                    age: $("#input_age1").val(),
                    gender: $("#input_gender1").val()
                };
                xhr.send(JSON.stringify(data));
                xhr.onload = () => {
                    if (xhr.status === 201) {
                        let res = JSON.parse(xhr.response);
                        $('#modalResult2').find('.modal-title').text('âœ… í•™ìƒì¶”ê°€ ì™„ë£Œ');     
                        $('#modalResult2').find('.modal-body p').html('í•™ìƒ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.<br><pre>' + JSON.stringify(res, null, 2) + '</pre>');
                        const resultModal = new bootstrap.Modal(document.getElementById('modalResult2'));
                        resultModal.show();

                        $("#btn_list1").click();
                    } else {
                        console.log(xhr.status, xhr.statusText);
                    }
                }
            });

            $("#btn_list1").click(function(){
                alert("í•™ìƒì •ë³´ë¥¼ ì¡°íšŒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?");

                const xhr = new XMLHttpRequest();
                xhr.open("GET","https://6915405284e8bd126af93912.mockapi.io/user/");
                xhr.setRequestHeader("content-type","application/json");
                xhr.send();
                xhr.onload = () => {
                    if (xhr.status === 200) {
                        let res = JSON.parse(xhr.response);
                        $("#div_list1").html("");
                        res.forEach(function(each){
                            $("#div_list1").append(
                                `<div>${each.id} : ${each.name} (${each.age}, ${each.gender || "ë¯¸ì…ë ¥"})</div>`
                            );
                        });
                    } else {
                        console.log(xhr.status, xhr.statusText);
                    }
                }
            });
        });       
    </script> 
</body>
</html>
